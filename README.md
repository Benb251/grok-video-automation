# Grok Image-to-Video Automation Tool

Automated Playwright-based tool for generating videos from images using Grok's Image-to-Video feature.

## âœ¨ Features

- ğŸ–¼ï¸ **Image-to-Video Generation**: Automatically upload images and generate videos with custom prompts
- âš™ï¸ **Video Configuration**: 
  - Duration: 6s or 10s
  - Resolution: 480p or 720p
  - Aspect Ratio: Inherited from uploaded image
- ğŸ–¥ï¸ **GUI Interface**: Easy-to-use Tkinter GUI for configuration
- ğŸ¤– **Full Automation**: Handles entire workflow from upload to download
- ğŸ”’ **Auto-Close**: Browser closes automatically after successful download

## ğŸ”„ Workflow

The tool automates the complete Image-to-Video generation process:

1. **Upload Image**: Selects and uploads the specified image file
2. **Wait for Transition**: Monitors URL change to `/imagine/post/*` format
3. **Enter Prompt**: Pastes custom prompt using clipboard
4. **Configure Duration**: 
   - Opens Video Options menu
   - Selects duration (6s/10s)
   - Menu auto-closes
5. **Configure Resolution**:
   - Reopens Video Options menu
   - Selects resolution (480p/720p)
   - Menu auto-closes
6. **Generate Video**: Clicks "Make video" button
7. **Monitor Generation**: Polls for video completion (max 6 minutes)
8. **Download Video**: Automatically downloads generated video
9. **Close Browser**: Closes browser after successful download

## ğŸ“‹ Prerequisites

- **Node.js** (v14 or higher)
- **Python 3.7+**
- **Google Chrome** browser
- **Active Grok account** with Image-to-Video access

## ğŸš€ Installation

### 1. Install Node Dependencies

```bash
cd grok-playwright
npm install
```

### 2. Install Python Dependencies

```bash
pip install -r requirements.txt
```

## ğŸ’» Usage

### Method 1: GUI (Recommended)

1. **Launch Chrome with Remote Debugging**:
   ```bash
   start-chrome.bat
   ```
   This opens Chrome with debugging enabled on port 9222.

2. **Login to Grok**:
   - Navigate to `https://grok.com/imagine`
   - Login with your credentials

3. **Run GUI**:
   ```bash
   python grok-gui.py
   ```

4. **Configure Parameters**:
   - **Prompt**: Enter your video generation prompt
   - **Aspect Ratio**: Select 16:9, 9:16, or 1:1 (inherited from image)
   - **Duration**: Choose 6s or 10s
   - **Resolution**: Choose 480p or 720p
   - **Image Path**: Select your image file

5. **Generate**: Click "Generate Video" button

### Method 2: Direct Script

```bash
node grok-automation.js
```

Configuration is loaded from `temp_config.json` (auto-generated by GUI).

## âš™ï¸ Configuration

The tool uses a JSON configuration file with the following structure:

```json
{
  "videoConfig": {
    "prompt": "Your video prompt here",
    "aspectRatio": "16:9",
    "duration": "10s",
    "resolution": "720p",
    "imagePath": "C:/path/to/your/image.png"
  }
}
```

## ğŸ“ Project Structure

```
grok-playwright/
â”œâ”€â”€ grok-automation.js    # Main automation script (Playwright)
â”œâ”€â”€ grok-gui.py           # GUI interface (Tkinter)
â”œâ”€â”€ start-chrome.bat      # Chrome launcher with debugging
â”œâ”€â”€ package.json          # Node dependencies
â”œâ”€â”€ requirements.txt      # Python dependencies
â”œâ”€â”€ downloads/            # Downloaded videos storage
â””â”€â”€ README.md            # This file
```

## ğŸ› Troubleshooting

### Browser Connection Issues

**Error**: `ECONNREFUSED` when connecting to Chrome

**Solution**:
1. Ensure Chrome is launched with remote debugging:
   ```bash
   "C:\Program Files\Google\Chrome\Application\chrome.exe" --remote-debugging-port=9222 --user-data-dir="C:\chrome-debug-profile"
   ```
2. Verify Chrome is running and listening on port 9222
3. Check that no other process is using port 9222

### Video Options Not Found

**Error**: Video Options button not detected

**Solution**:
- Ensure you're on the Image-to-Video page (`/imagine/post/*`)
- Wait for page to fully load before automation
- Check that the image uploaded successfully

### Resolution Not Selected

**Issue**: Tool selects 720p instead of 480p

**Cause**: Menu auto-closes after duration selection

**Fix**: Already implemented - tool now reopens menu twice:
1. First time: Select duration
2. Second time: Select resolution

### Navigation to `/imagine` Instead of Submit

**Cause**: Escape key triggers "Back" navigation in Grok

**Fix**: Already implemented - Escape key removed from workflow

## ğŸ”§ Technical Details

### Key Fixes Implemented

1. **Menu Auto-Close Handling**:
   - Menu closes after each option click
   - Tool reopens menu between duration and resolution selection

2. **Escape Key Removed**:
   - Escape key triggers unwanted navigation
   - Tool now clicks submit with menu still open

3. **Precise Selectors**:
   - Input: `textarea[aria-label="Make a video"]`
   - Video Options: `button[aria-label="Video Options"]`
   - Duration: `button[aria-label="6s"]` / `button[aria-label="10s"]`
   - Resolution: `button[aria-label="480p"]` / `button[aria-label="720p"]`
   - Submit: `button[aria-label="Make video"]`

4. **URL Verification**:
   - Checks URL transition to `/imagine/post/*` after upload
   - Verifies still on correct page before submit

## ğŸ“ Notes

- **Aspect Ratio**: Not configurable in Image-to-Video mode - always inherited from image
- **Timeout**: Video generation timeout is 6 minutes
- **Browser**: Chrome stays open on error for debugging, closes on success
- **Download Location**: Videos saved to `downloads/` folder

## ğŸ¯ Success Indicators

When automation completes successfully:

```
âœ… Video generated successfully!
âœ… Video downloaded: grok_video_[timestamp].mp4

ğŸ”’ Closing browser...
âœ… Browser closed successfully!

ğŸŠ ALL DONE! Video downloaded and browser closed.
```

## ğŸ“œ License

This tool is for personal/educational use with Grok's Image-to-Video feature.
